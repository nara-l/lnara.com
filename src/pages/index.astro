---
import { getCollection } from "astro:content";
import Layout from "@/layouts/Layout.astro";
import Header from "@/components/Header.astro";
import Footer from "@/components/Footer.astro";
import getSortedPosts from "@/utils/getSortedPosts";
import { getPath } from "@/utils/getPath";

const posts = await getCollection("blog");
const sortedPosts = getSortedPosts(posts);
const recentPosts = sortedPosts.slice(0, 5); // Last 5 posts
---

<Layout>
  <Header />
  <main id="main-content" class="max-w-3xl mx-auto px-4 py-8">

    <!-- Header -->
    <header class="mb-12">
      <h1 class="text-3xl font-bold mb-2">Lawrence Nara</h1>
      <p class="text-lg text-gray-600">Building things, thinking out loud</p>
    </header>

    <hr class="my-8 border-gray-300" />

    <!-- Now Section -->
    <section class="mb-12">
      <h2 class="text-xl font-semibold mb-4">Now</h2>
      <p class="text-lg leading-relaxed font-medium">
        Took my first real break in years after getting burned out from working non-stop.
        During the sabbatical, decided to finally finish my MBA and started experimenting with AI. 'Your fastest path to yourself is unemployment' - and that turned out to be true. Something magical happens when you step back from the daily grind - you see where tech is heading, where humanity is heading. Got my energy back. Now building things and prepping for my next full-time role.
      </p>
      <p class="text-sm text-gray-500 mt-2">Last updated: January 2025</p>
    </section>

    <hr class="my-8 border-gray-300" />

    <!-- Recent Writing -->
    <section class="mb-12">
      <h2 class="text-xl font-semibold mb-6">Recent Writing</h2>
      <ul class="space-y-4">
        {recentPosts.map((post) => (
          <li>
            <a
              href={getPath(post.id, post.filePath)}
              class="block text-blue-600 hover:text-blue-800 transition-colors"
            >
              <div class="flex flex-col sm:flex-row sm:items-baseline sm:justify-between">
                <h3 class="font-medium">{post.data.title}</h3>
                <time class="text-sm text-gray-500 mt-1 sm:mt-0">
                  {post.data.pubDatetime.toLocaleDateString('en-US', {
                    year: 'numeric',
                    month: 'short',
                    day: 'numeric'
                  })}
                </time>
              </div>
              <p class="text-gray-600 text-base mt-1 line-clamp-1 leading-relaxed">
                {post.data.description}
              </p>
            </a>
          </li>
        ))}
      </ul>
      <div class="mt-6">
        <a
          href="/posts/"
          class="text-blue-600 hover:underline text-sm"
        >
          → View all posts
        </a>
      </div>
    </section>

    <hr class="my-8 border-gray-300" />

    <!-- Work Section -->
    <section class="mb-12">
      <h2 class="text-xl font-semibold mb-6">Work</h2>
      <ul class="space-y-4">
        <li class="text-lg leading-relaxed">
          <strong>Infosys</strong> - Led teams that modernize legacy systems for Fortune 100 companies (2019-2024)
        </li>
        <li class="text-lg leading-relaxed">
          <strong>Amiti Consulting</strong> - Built SaaS feedback tool for investment firm with 500+ employees (2018)
        </li>
        <li class="text-lg leading-relaxed">
          <strong>UMHCS</strong> - Developed HIPAA-compliant health records system (2017-2018)
        </li>
        <li class="text-lg leading-relaxed">
          <strong>Wasamundi</strong> - Co-founded first business directory in Cameroon, pioneered student hostel directory and SMS marketing SaaS, grew to 5K+ businesses (2011-2017)
        </li>
        <li class="text-lg leading-relaxed">
          <strong>Usepulse</strong> - Built university communication platform connecting students via SMS/web (2011-2013)
        </li>
        <li class="text-lg leading-relaxed">
          <strong>Tools I use</strong> - AWS, React, Angular, Node.js, Python, whatever works for the problem
        </li>
      </ul>
      <div class="mt-6">
        <a
          href="/lawrence-njie-litumbe-resume.pdf"
          class="text-blue-600 hover:underline text-sm"
          target="_blank"
        >
          → Download resume (PDF)
        </a>
      </div>
    </section>

    <hr class="my-8 border-gray-300" />

    <!-- Connect Section -->
    <section class="mb-12">
      <h2 class="text-xl font-semibold mb-6">Connect</h2>
      <div class="flex gap-4">
        <a
          href="mailto:lawrence.nara@gmail.com"
          class="text-blue-600 hover:underline"
        >
          Email
        </a>
        <span class="text-gray-400">·</span>
        <a
          href="https://github.com/nara-l"
          class="text-blue-600 hover:underline"
          target="_blank"
          rel="noopener noreferrer"
        >
          GitHub
        </a>
        <span class="text-gray-400">·</span>
        <a
          href="https://www.linkedin.com/in/lawrence-njie-litumbe-8a042032/"
          class="text-blue-600 hover:underline"
          target="_blank"
          rel="noopener noreferrer"
        >
          LinkedIn
        </a>
        <span class="text-gray-400">·</span>
        <a
          href="/rss.xml"
          class="text-blue-600 hover:underline"
        >
          RSS
        </a>
      </div>
    </section>

  </main>
  <Footer />
</Layout>

<style>
  .line-clamp-1 {
    display: -webkit-box;
    -webkit-line-clamp: 1;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
</style>